---
import AstroIcon from "./icons/AstroIcon.astro";
import JavaScript from "./icons/JavaScript.astro";
import Node from "./icons/Node.astro";
import Tailwind from "./icons/Tailwind.astro";
import Php from "./icons/Php.astro";
import MySQL from "./icons/MySQL.astro";
import Boostrap from "./icons/Boostrap.astro";
import React from "./icons/React.astro";
import Laravel from "./icons/Laravel.astro";
import TypeScript from "./icons/TypeScript.astro";
import Netlify from "./icons/Netlify.astro";
import ArrowRight from "./icons/ArrowRight.astro";

// Mapeo de nombres a componentes
const iconMap = {
  Astro: AstroIcon,
  JavaScript: JavaScript,
  "Node.js": Node,
  Tailwind: Tailwind,
  Php: Php,
  MySQL: MySQL,
  Boostrap: Boostrap,
  React: React,
  Laravel: Laravel,
  TypeScript: TypeScript,
  Netlify: Netlify,
};

// Renderizar datos de la coleccion de astro
import { getCollection } from "astro:content";

const projects = await getCollection("projects");
---

{
  projects.map((project) => {
    const { slug, data } = project;
    const { title, description, logo, imgs, link_demo, tecnologias } = data;
    return (
      <div class="col-span-1 p-4">
        <a
          href={`/proyectos/${slug}`}
          class="block w-full bg-white dark:bg-[#131316] border border-solid border-gray-200 dark:border-[rgba(255,255,255,0.1)] rounded-2xl no-underline relative group hover:border-gray-300 dark:hover:border-[rgba(255,255,255,0.2)] transition-all duration-300"
        >
          <div class="w-full rounded-2xl p-8 relative overflow-hidden">
            <div class="size-14 bg-gray-100 dark:bg-[#1c1c21] border border-solid border-gray-200 dark:border-[rgba(255,255,255,0.06)] rounded-lg justify-center items-center mb-8 flex">
              <img
                src={logo}
                alt={title}
                class="size-8 loading-lazy max-w-full inline-block"
              />
            </div>
            <h1 class="mb-2 text-lg font-medium animate-text-gradient inline-flex bg-gradient-to-r from-gray-900 via-gray-600 to-gray-500 bg-[200%_auto] bg-clip-text leading-tight text-transparent dark:from-neutral-100 dark:via-slate-400 dark:to-neutral-400">
              {title}
            </h1>
            <p class="text-sm mb-4 text-gray-600 dark:text-[#9ca0ab]">
              {description}
            </p>
            <div class="flex gap-2 flex-wrap items-center justify-between">
              <div class="flex gap-2 flex-wrap">
                {tecnologias.map((tecnologia: string) => {
                  const IconComponent =
                    iconMap[tecnologia as keyof typeof iconMap];
                  return IconComponent ? (
                    <IconComponent class="size-5 text-gray-500 dark:text-gray-400" />
                  ) : (
                    <span class="px-2 py-1 bg-gray-100 dark:bg-gray-800 text-xs text-gray-600 dark:text-gray-400 rounded">
                      {tecnologia}
                    </span>
                  );
                })}
              </div>
              <ArrowRight class="size-5 text-gray-400 dark:text-gray-500 group-hover:text-gray-600 dark:group-hover:text-gray-300 group-hover:translate-x-1 transition-all duration-300" />
            </div>
          </div>
        </a>
      </div>
    );
  })
}
